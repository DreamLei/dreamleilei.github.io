<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="磊磊的博客" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="for my dream">
<meta property="og:type" content="website">
<meta property="og:title" content="磊磊的博客">
<meta property="og:url" content="http://dreamleilei.github.io/page/2/index.html">
<meta property="og:site_name" content="磊磊的博客">
<meta property="og:description" content="for my dream">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="磊磊的博客">
<meta name="twitter:description" content="for my dream">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://dreamleilei.github.io/page/2/"/>

  <title> 磊磊的博客 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">磊磊的博客</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/25/Redis 使用/" itemprop="url">
                  Redis 使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-04-25T13:01:13+08:00" content="2016-04-25">
              2016-04-25
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/redis/" itemprop="url" rel="index">
                    <span itemprop="name">redis</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>(1)设置redis的登录密码:在redis的配置文件中用添加requirepass &nbsp; password</p>
<p>(2)在登录的时候需要redis-cli -a password &nbsp;或者登录之后调用auth命令输入密码</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/25/Mysql主从复制的实现/" itemprop="url">
                  Mysql主从复制的实现
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-04-25T09:44:46+08:00" content="2016-04-25">
              2016-04-25
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/数据库/" itemprop="url" rel="index">
                    <span itemprop="name">数据库</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最近想实现MySql的主从复制,在网上搜了资料后有两种实现方式,</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; (1)修改 /etc/my.cnf 文件,在从数据库的配置文件中修改</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server-id=2</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;host-name=&lt;hostname&gt;</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;host-user=&lt;user&gt;</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;host-password=&lt;password&gt;</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;master-log-file=</p>
<p>&nbsp; &nbsp; 然后重启数据库</p>
<p>(2)在启动mysql后输入命令:</p>
<p>&nbsp; CHANGE MASTER TO</p>
<p>&nbsp; &nbsp; MASTER_NAME=&#39;&#39;,</p>
<p>&nbsp; &nbsp; MASTER_USER=&#39;&#39;,</p>
<p>&nbsp; &nbsp; MASTER_PASSWORD=&#39;&#39;,</p>
<p>&nbsp; &nbsp; MASTER_LOG_FILE=&#39;&#39;,</p>
<p>&nbsp; &nbsp; MASTER_LOG_POS&#39;&#39;;</p>
<p>START SLAVE;</p>
<p>后来在自己的mariadb 10.0下用第一种方式,发现mysql重启报错,后来查了一下资料是因为MySql5.5之后不再支持,所以用第二种实现</p>
<p>参考链接：<a href="http://blog.csdn.net/hw_libo/article/details/38072287" target="_blank" rel="external">http://blog.csdn.net/hw_libo/article/details/38072287</a></p>
<p>&nbsp;&nbsp;</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p>
<p>&nbsp; &nbsp;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/23/本机redis多端口启动/" itemprop="url">
                  本机Redis多端口启动
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-04-23T06:09:04+08:00" content="2016-04-23">
              2016-04-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/redis/" itemprop="url" rel="index">
                    <span itemprop="name">redis</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近再看redis,看到redis的主从复制模块,但因吃土的日子没有多台服务器,于是尝试着在本地启动多端口,简单实现复制.</p>
<p>根据网上的教程找了半天没有找到redis的安装路径,原来是cenotsyum安装的,最后只有一个redis-server文件,通过find搜索发现,,只是在在我的/etc目录下有一个redis.conf,后来搜索资料发现,redis的正常启动流程默认是要读取配置文件的,</p>
<p>应该是用redis-server redis.conf这样即可, 如果想要设置多端口,需要复制一份redis.conf 然后启动即可.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/21/第三方登录/" itemprop="url">
                  第三方登录
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-04-21T09:45:44+08:00" content="2016-04-21">
              2016-04-21
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/第三方登陆/" itemprop="url" rel="index">
                    <span itemprop="name">第三方登陆</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <pre><code>最近面试等各种事情就少了,于是静下心来学一点自己喜欢的东西 ,想起之前做过web端的租赁平台,决定把它重构一下.
</code></pre><p>   首先做的是登录方面的重构,准备打算做一个第三方的登录授权,暂时正在做的是QQ的接入登录.</p>
<p>   首先你要申请自己的网站接入,登录connect.qq.com,申请网站应用的接入,这里接入的时候一定要注意你的回调地址,</p>
<p>这里的回调地址可以填写多个回调地址,是授权登录成功后可以跳转的地址,如果申请登录时,设置的跳转成功的url不是一个已经注册过的回调地址,会包100010的错误.</p>
<p>  目前所做的开发流程:</p>
<p>  (1)在网站上设置QQ登录的图标,点击图标,触发一个get请求 get请求相应的参数设置参见:<a href="http://wiki.connect.qq.com/%E4%BD%BF%E7%94%A8authorization_code%E8%8E%B7%E5%8F%96access_token" target="_blank" rel="external">qq互联api</a></p>
<p>  (2)get请求的发送应该是伴随着页面的跳转,跳转相应的页面,然后登录自己QQ</p>
<p>  (3)如果正常登录之后,会回调一个url,回调的url是get请求参数的url</p>
<p>自己根据网上的demo已经搭建了一个简单的登录平台,总结一下自己走过的坑:</p>
<p>(1)idea开发中没有正确的把包导入</p>
<p>(2)servlet的api的mvn包导入错误</p>
<p>(3)回调地址没有写对,如果想要回调,一定要要把回调的地址写全(不要加请求参数,但是路径一定要是全的</p>
<p>后来有经过查阅一下资料,发现这种授权模式是授权码的授权模式:oatuth的部分可以参见: <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html" target="_blank" rel="external">http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html</a><br>oauth授权模式可以更方便的保护密码,实现资源的限制访问.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/09/struts2实现rest/" itemprop="url">
                  struts2实现rest
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-12-09T07:11:24+08:00" content="2015-12-09">
              2015-12-09
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/struts2/" itemprop="url" rel="index">
                    <span itemprop="name">struts2</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><span style="font-size: 20px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; 这学期跟着学长做了一个基于rest架构的php应用,学习了rest架构,便想着可以把之前自己做过的</span><a href="http://korent.dreamleilei.com" target="_blank" rel="external"><span style="font-size: 20px;">软酷网</span></a><span style="font-size: 20px;">重构,把后天重构成rest格式的,试着用了一下strus2的rest插件.<br></span></p>
<p><span style="font-size: 20px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;首先说明一下什么是rest.&nbsp;</span><a href="http://www.ruanyifeng.com/blog/2011/09/restful.html" target="_blank" rel="external"><span style="font-size: 20px;">rest介绍</span></a><span style="font-size: 20px;"> 个人理解rest 是一种思想,通过实现这种思想进行web端的架构,可以真正的实现前后端完全的分离,实现前端不必理会后台用什么语言实现,只需要知道相应的接口即可,而后台更不用管视图页面使如何展现的,只需要按照相应的规则,返回数据即可.<br></span></p>
<p><span style="font-size: 20px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;重构的想法是想把前端完全不用jsp.都用html,前端通过ajax请求来获取相应的数据,后端对所有的请求统一返回json.<br></span></p>
<p><span style="font-size: 20px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;而用户的登录想用web token来实现(暂时没有思路),但是用php的laravel框架做过相应的例子(JWAuth)<br></span></p>
<p><span style="font-size: 20px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最初的网站用struts2作为controller层,实现rest架构,引入struts2-rest 和struts2-convention两个jar包,然后在struts.xml中进行 配置即可,进行相应配置的博文,网上搜一下一大堆,就不再墨迹,在这里罗列一下遇到的问题和要注意的事项.</span></p>
<p><span style="font-size: 20px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 首先:版本的问题,因为struts2的版本太低,低于了struts2的2.1.16版本,结果在RequestUtil的类中找不到getUri方法,导致了无法正常web应用,后来花了好久的时间才找到原因,原来getUri方法,是2.1.16之后新增的方法,将struts2的版本设置成高版本之后,web应用可以正常运行.<br></span></p>
<p><span style="font-size: 20px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在struts2的约定中默认只会搜索后缀为Action的类作为Action,这个时候可以修改struts2.convention.suffix的值来指定Action的后缀,还可以通过制定struts2.convention.action.packages这个类来指定除了默认的包搜索Action类以外还要在哪些包下搜寻(记得要从根路径下开始写起),这个要和struts2.convention.action.pacakge.locators区别开来前者制定的是除了后者之外还要在的包下搜寻.<br></span></p>
<p><span style="font-size: 20px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;当strus2-rest和struts2-browser包用的时候,struts2-browser就会失效,这个时候,在struts.xml中制定</span></p>
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:&#39;Source Code Pro&#39;;font-size:16pt;"><span style="font-size: 20px;"><span style="font-size: 20px; color: rgb(232, 191, 106);">&lt;constant </span><span style="font-size: 20px; color: rgb(186, 186, 186);">name</span><span style="font-size: 20px; color: rgb(165, 194, 97);">=&quot;struts.mapper.class&quot; </span><span style="font-size: 20px; color: rgb(186, 186, 186);">value</span><span style="font-size: 20px; color: rgb(165, 194, 97);">=&quot;org.apache.struts2.dispatcher.mapper.PrefixBasedActionMapper&quot; </span><span style="font-size: 20px; color: rgb(232, 191, 106);">/&gt;
&lt;constant </span><span style="font-size: 20px; color: rgb(186, 186, 186);">name</span><span style="font-size: 20px; color: rgb(165, 194, 97);">=&quot;struts.mapper.prefixMapping&quot; </span><span style="font-size: 20px; color: rgb(186, 186, 186);">value</span><span style="font-size: 20px; color: rgb(165, 194, 97);">=&quot;/rest:rest,:struts&quot; </span><span style="font-size: 20px; color: rgb(232, 191, 106);">/&gt;</span></span></pre>

<p><span style="font-size: 20px;">即可让config-browser生效.</span></p>
<p><span style="font-size: 20px;">上面两句话的意思是使用访问空间映射,所有命名空间为/rest的都用rest格式映射,所有根命名空间用struts映射.</span></p>
<p><span style="font-size: 20px;">&nbsp;&nbsp; &nbsp; struts-rest 不支持原生的put和delete请求,网上有相应的解决办法</span></p>
<p><span style="font-size: 20px;">&nbsp;&nbsp;&nbsp;&nbsp;参考链接:&nbsp;<a href="http://www.cnblogs.com/yjmyzz/p/struts2-rest-plugin-advanced-usage.html" target="_blank" rel="external">http://www.cnblogs.com/yjmyzz/p/struts2-rest-plugin-advanced-usage.html</a><br></span></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/09/15/软酷实训总结/" itemprop="url">
                  软酷实训总结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-09-15T09:33:24+08:00" content="2015-09-15">
              2015-09-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/实习/" itemprop="url" rel="index">
                    <span itemprop="name">实习</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><span style="font-size:20px;">&nbsp; &nbsp; &nbsp; &nbsp; 终于结束了软酷20天的实训,昨天下午除去玩了一下午和一晚上,放松一下,今天下午总结一下软酷20天实训过程中所学到的东西.</span></p>
<pre><code>&lt;span style=&quot;font-size:20px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 首先说一下这二十天的状态吧,第一周还是不错的,因为只是前期牵扯到一些文档的书写,而我们对于一些文档的高要求并没有达到,所以第一周还不是特别累,但是犯得最大的错就是在需求方面虽然付出了很大的努力,但是最终还是没有真正的弄清楚需求,所以在数据库建模完成以后还需要对数据库的字段进行修改,我感觉这个很不应该,最起码在编码之前就应该把数据库的模型给建立好,最好不要到后期再对数据库进行一些修改.&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; 然后第一周基本上把项目立项的文档,需求文档,系统实现文档都写的差不多,然后第二周开始编码,编码的过程那真叫一个累,每天早上八点准时指纹签到,晚上6点30指纹签退,中午可以休息,但是因为每次我都会遇到一些小问题,所以每次在中午的时候我都会比别人晚一个小时下班,晚上更不用说,晚上那么安静的时间更是用来撸码,记得有一次最疯狂的时候撸码撸到早上5点(因为第二天要交代码了),本以为第二天会崩溃,还好没有,最后经过各种心跳,各种失望与希望的折磨,完成了这次实训,获得了优秀作品.&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; 说一下在这次实训中学到的东西吧,首先是对ssh框架有了进一步的认识:之前自学过一点ssh框架,总以为dao和service和action都是对应者一张表来的,后来发现真的是大错特错,其实dao层是对数据的直接访问,一个dao层对应着数据库的一张表,或者说一个dao层对应着一个hibernate中的实体类,而service层,是业务逻辑层,可以对应者一个dao层,不过更多的是耦合多个dao层,实现一些业务的逻辑,而action层(web层),就对应着用户的一个个的请求,而数据的传递,在server层和dao层应该是以对象的形式来传递的,而在action中可以通过gson化,传给前端.根据页面的需要,把一个一个的请求抽象成action类,其中相同参数的或者大部分相同参数的可以用同一个action,这就是我通过这次实训对dao层,service层和action层的进一步理解.&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;除了三个层次的一些理解,还有对一些命名方式的理解,hibernate中实体字段的名称千万不要用到order, column, desc等mysql的关键字,不然会造成一些难于察觉的错误,还有如果有多张表的id的话,最好对每个表的id和实体的id的名字都加以区分,不然到最后可能发现因为命名习惯造成的麻烦非常的耗费时间,而在三个层中,大部分是通过id来进行对象的传递,所以说id非常的重要.&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 说一下一些测试的重要性吧,后台的测试代码相当重要,他可以帮助你快速找到bug,可以让你的编码事半功倍,这次实训花了半天的时间学会了测试action,用到StrutsSpringTestCase框架,这个框架真的非常的棒,省去了你每次都要重新部署然后测试action,StrutsSpringTestCase这个框架在我的笔记中有记录,在此不再细说,其实后端还有好多的小细节问题,因为自己的一些疏忽大意造成了本来可以花费五分钟解决的问题需要用两个小时解决,真实悲哀啊,以后更应该注意一些细节问题.&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; 在数据方面也出现了一些不足之处,其实每张表都应该有一个时间戳,无论如何,都应该有一个时间戳,而时间戳的形式最好是精确到秒,这样就可以在排序的时候有个排序,然后最后应该有个字段可以用来区分如果时间相同,如何对进行排序的,还有暂时没有学会数据库直接存储图片,只是用到了数据库存储图片的路径.&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp;说完了后台的一些收货,再说一下前端的收获,前端方面,我不是负责界面的设计,但是我负责了数据的交互,主要用到了Jquery和jquery的插件,之前只看过三天的&lt;/span&gt;,前端的收货对我来说是最大的&lt;span style=&quot;font-size:20px;&quot;&gt;jquery,然后现在就直接拿来用jquery,是边看书边学边用,这样的学习方式真的很快,但是有些东西是学不牢的,jquery的一些选择和操作差不多都已经学会了,一些其它简单的操作,在笔记上都有记录,在此就不在复述,除了jquery,还用到了jnotify,jmessage,jcrop,jfileupload等插件的简单使用,尤其是对jcrop,jfileupload插件的印象特别深刻,当时因为不会用,花费了好长时间来学习,还有前端收货的是ajax的使用,之前只是听说过ajax,根本就不知道什么是ajax,通过这次实训,学会了用jquery的ajax,感觉jquery挺容易上手的,但是js还不是很会,我需要有时间静下心来,学一下js和看一下&amp;lt;&amp;lt;jquery基础教程&amp;gt;&amp;gt;,对于前端的一些布局和和模型的理解更是掌握的更差,更差,需要有时间来看一下.&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;&amp;nbsp; &amp;nbsp;再谈一下我在数据交互中的收获,当时开始用json,一开始用的是标准的json,然后发现json不太好用,有些枚举类型不能正确的json话,然后后来用到了阿里的json,发现还挺好用的,不过后来发现了google 的gson,发现google的gson确实好用,确实很强大,可以自定义过滤一些字段,可以自定义设置时间的格式,后端的对象json化用的是gson.toJson把对象转换成json串,而在前端是用到JSON.parse()把接受到的json转换成对象,&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;&amp;nbsp;&amp;nbsp; 然后除了以上的收获,还有学会了前端的分页,学会验证码的使用,学会了图像的剪切,还有团队之间的分工协作,学会了熬夜找bug,改代码,希望以后的学习能像实训中那样拼,做出最好的自己!&lt;/span&gt;
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/08/03/hibernate学习总结(一)/" itemprop="url">
                  Hibernate学习总结(一)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-08-03T03:45:32+08:00" content="2015-08-03">
              2015-08-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/hibernate/" itemprop="url" rel="index">
                    <span itemprop="name">hibernate</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#<br>    &nbsp; &nbsp;最近一直在学Hibernate框架,因为比较懒,好久没有写博客了,今天强制要求自己把学过的东西总结一下.</p>
<pre><code>&amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;span style=&quot;font-size:20px;&quot;&gt;&amp;nbsp; &amp;nbsp; 首先介绍一下什么是Hibernate,我认为的hibernate是一个ORM框架,是一个对象/关系映射的框架,所为对象关系映射,就是把数据库的各种关系映射成对象,然后对数据库的操作只需要对一个一个的对象操作就行,这种操作的好处是脱离了底层数据库的复杂,只需要对对象操作即可改变数据库.&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;然后谈一下映射的方式,关系映射把数据库中的表映射成对象中的一个类,而每一条记录映射成类的一个实例,数据库的字段映射成对象的属性.&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; 安装包的下载,因为我用的是idea + maven,所以下载的时候只需要复制ibernate-core的依赖包导入即可,然后如果你用的是jdbc连接数据库,还应该导入相应的jdbc所需要的包,因为还要用到数据源,应该把所用到的数据源的包导入,例如我用的是e3p0的数据源,就依赖导入e3p0-hibernate的包.&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; 相应的包导入完成之后,接下来就需要进行hibernate.cfg.xml的配置,hibernate.cfg.xml是hibernate的默认配置文件名,相应的配置格式,你可以参照hibernate-core-XXX.Final.jar的org.hibernate包下的hibernate-configuration3.0.dtd&amp;nbsp;,xml的根元素是hibernate-configuration,然后还有&amp;lt;session-factory&amp;gt;子元素,里面是&amp;lt;property&amp;nbsp;name = &amp;quot;&amp;quot; &amp;gt; &amp;lt; /property&amp;gt;的配置,具体的配置不再详细的陈述,除了配置xml文件外,还可以配置相应的资源文件,即hibernate.cfg.properties文件配置,格式为属性名 值名.&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp;说完了配置文件,再谈一下如果利用配置文件创建Configuration对象,利用配置文件配置很简单,直接 &amp;nbsp;Configuration conf &amp;nbsp;= new Configuration().configure();后面的configure()方法的参数默认为hibernate.cfg.xml文件,你也可以手动的自己添加配置文件的路径.&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;&amp;nbsp; &amp;nbsp; 除了上述方法外,也可以通过new Configuration().addAnnotaedClass(Item.class).addAnnotatedClass()把所有的映射类添加进去,这种添加是默认以hibernate.properties文件为configuration的文件.也可以不配置properties文件,而是通过不停的.setProperty(&amp;quot;name&amp;quot;, &amp;quot;value&amp;#39;)来进行创建.&lt;/span&gt;

&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; Hibernate的持久化对象有3中状态:(1)瞬态 (2)持久化状态 (3) 脱管状态.当你new一个对象的时候,对象是处于瞬态的,这个时候可以被垃圾回收.当调用session.load() 或则save() 或者get(), saveOrUpdate方法的时候,就变成持久化状态,当持久化状态调用delete方法,就成了瞬态的对象,持久化的状态通过evict,close或者clear方法就变成了托管的对象.&lt;/span&gt;

&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; 接下来谈一下Hibernate映射,hibernate映射可以通过xml的方式或者是通过注解的方式.在这里我们谈一下通过用注解的方式.&lt;/span&gt;

&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;要把一个类映射成你一个table,这个时候要用到@Entity映射,然后通过@Table(name = &amp;quot; &amp;quot;)制定表的名称,而类中的属性就会自动的映射成数据库中的字段,但是我们往往要通过@Column(name=&amp;quot; &amp;quot;, length = &amp;quot; &amp;quot;, unique= &amp;quot; &amp;quot;, nullable = )等进行字段的限制.也可以通过@Check(constraints=&amp;quot;&amp;quot;)对整个表进行check约束. 对字段进行映射的时候可以通过@Transient设置不在数据库中生成相应的字段,也可以通过@Formlu(value= &amp;quot;()&amp;quot;)惊醒为字段制定赋值规则,使用此注解也不会在数据库中生成相应的字段.特殊的字段如果是enum类型的话,需要用@Enumerated进行修饰,通过(EnumeType.ORDINAL或者EnumType.STRING)进行设置显示方式,如果是数据库中存放的是大数据例如图片,可以用@Lob注解修饰,用@Basic注解辅助修饰时间类型的话用@Temporal()设置数据库中存储的时间类型.&lt;/span&gt;

&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 谈完了单个表和字段的映射,再谈一下如何映射主键,一般主键用@Id注解修饰,然后通过GeneratedValue()设置主键的值,GeneratedValue的值可以有GenerationType.*指定,也可以通过自定义的主键生成器指定.&lt;/span&gt;

&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; 如果一张表中的属性是一个集合,那应该怎么映射呢,那就应该通过外键,重新创建一张新表,通过@ElementCollection(targetClass=) @CollectionTable(name = &amp;quot; &amp;quot;, joinColumns={@JoinColumn(name = &amp;quot; &amp;quot;, referenceColumn=&amp;quot; &amp;#39; ... ) })映射,&lt;/span&gt;

&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp; 如果集合的数据类型是组件,只需要组件的类用@Embeddable修饰即可,其它的都是一样的.&lt;/span&gt;

&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;如果是List,需要指定@OrderColumn(name = &amp;quot;&amp;quot; )如果是Set不用指定,如果是Map,需要指定@MapKeyClass和@MapKeyColumn().&lt;/span&gt;

&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;&amp;nbsp; &amp;nbsp;如果表中的某个属性是组件怎么呢,所为的组件就是不被持久化的类,这个时候需要在组件的类注解@Embeddable,然后增加@Parent注解.或者在持久化类中用@Embedded &amp;nbsp;@AttributeOverrides(@AttributeOverride(name = &amp;quot; &amp;quot;, column=@Column()),..);进行注解修饰.&lt;/span&gt;

&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;如果组件的属性中有集合的话,就和非组件的集合属性的修饰是一样的.&lt;/span&gt;

&amp;nbsp;

&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/07/26/struts2 学习总结/" itemprop="url">
                  struts2 学习总结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-07-26T15:35:01+08:00" content="2015-07-26">
              2015-07-26
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/struts2/" itemprop="url" rel="index">
                    <span itemprop="name">struts2</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#<br>    从昨天开始看李刚的&lt;&lt;轻量级JavaEE&gt;&gt;的深入使用struts2,到现在感觉学的东西有点多,有点乱,有点杂,于是静下心来,整理一下.</p>
<div><br>    <span style="font-size:20px;">&nbsp;&nbsp; 深入使用struts2,我看了struts2的类型转换,字段的校验,文件的上传,文件的下载.</span><br></div>

<div><br>    &nbsp;<br></div>

<pre><code>&lt;span style=&quot;font-size:20px;&quot;&gt;&amp;nbsp;&amp;nbsp;首先谈一下类型的转换,在此之前我想先说一下Action类中的属性,action类中的每一个属性都会对应着web应用的值,当你请求action的时候,然后转发到某个视图资源,通过&amp;lt;s:debug /&amp;gt;标签,你会看到,你的action中的每个属性都会存到valueStack中.那么问题就来了,这就牵扯到了类型的转换,valueStack中的对象都是Object类型的所以都要进行类型转换.struts2已经内建了int,double,float,bool,char.boolean以及它们的包装类和Date类型的参数.其余的复合类型就需要自己定义了.&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;&lt;span style=&quot;line-height: 32px;&quot;&gt;假如有一个Action类中定义一个名为user的对象,为User类型,而User类型有name和password两个属性,假如前台给你传过来的对象是一个字符串:user=leilei:helloworld这个时候 你就需要自己定义类型转换器,从字符串中解析出想要的东西,生成相应的User类型的对象.再比如前台跟你传过来的是user.name=&amp;quot;&amp;quot;和use.password=&amp;quot;&amp;#39;这种格式,这是给你传过来的一个user对象,如果你要给别的地方传一个String类型的对象,这个时候你也要进行类型转换,转换成String对象.&amp;nbsp;&lt;/span&gt;&lt;/span&gt;

&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;自定义的类型转换器,要求实现DefaultTypeConverter类后重写其中的convertvalue方法或者实现StrutsTypeConverter类重写ConvertToString(Map content, Object value) 和convertFromString(Map content, String [] value, Class toType)方法.&lt;/span&gt;
</code></pre><div><br>    <span style="font-size: 20px; line-height: 32px;">类型转换器定义好之后,还需要注册类型转换器,注册类型转换器有局部和全局两种.</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">局部类型转换器:局部类型转换器要写在资源文件里,资源文件的命名规则是ActionName-conversion.properties,文件内容的格式为:对象名=相应的转换类的名字.</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">全局类型转换器:在xwork-conversion.properties(此文件在class类的加载路径下),文件内容的格式和局部的内容格式是相同的.</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">如果在Action中用到了集合类,而集合类的泛型没有明确指出,则需要在相应的Action-conversion.properties中配置,List类型的参数格式为Element_类型名=相应的类型定义类</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">Map类型的参数格式为Key_&lt;MapPropName&gt;=&lt;key<em>type&gt; Element</em>&lt;MapPropName&gt;=&lt;key_type&gt;</span><br></div>

<div><br>    &nbsp;<br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">如果在类型转换中出现类型转换错误,则会返回一个input字符串,进入input的视图,在input视图中可以通过&lt;s:filederror /&gt;打印出错误信息,如果想更改这个信息的格式可以在资源文件中设置xwork.default.invalid.fieldvalue值.如果想对某一字段转换失败的错误消息作出更改,可在相应的Action的资源文件中配置invalid.fieldvalue.&lt;propName&gt;=&lt;tipMsg&gt;.</span><br></div>

<div><br>    &nbsp;<br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">接下来谈一下字段校验,字段校验是指某个字段必须满足某些条件,否则就要转发到input视图,编写校验规则一般要通过配置相应的xml文件实现,文件名为Action名-validation.xml名,validation的格式书写可以分为字段式的校验和非字段式的校验,字段式的校验格式:</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&lt;valiators&gt;</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&nbsp; &nbsp;&lt;fieldName=&quot;name&quot; &gt;(可以有多个)</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&nbsp; &nbsp; &nbsp; &lt;fileld-validator type=&quot;type&quot;&gt;(可以有多个)</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;param name=&quot;条件&#39;&gt;条件&lt;/param&gt;(可以有多个)</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;message key=&quot;国际化提示消息&quot;&gt;如果校验错误,就输出这个信息&lt;/message&gt;(这个是必须的)</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/field-validator&gt;&nbsp;</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&nbsp;&nbsp; &nbsp; &nbsp;&lt;field-validator type=&quot;&quot;&gt;</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&nbsp;&nbsp; &nbsp; ………..</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&nbsp;&nbsp; &nbsp; &nbsp;&lt;/field-validator&gt;</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&nbsp; &nbsp; &nbsp; &nbsp;&lt;/fieldName&gt;</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&nbsp;&lt;/valiators&gt;</span><br></div>

<div><br>    &nbsp;<br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">客户端校验:在&lt;s:form中设置 validate=&quot;true&quot; &gt;但是这样之后这个界面不能直接访问,否则会报错,必须通过其它的界面进行转发.</span><br></div>

<div><br>    &nbsp;<br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">除了字段校验风格的校验器还有非字段校验风格的校验器.</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&lt;validators&gt;</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&nbsp;&nbsp;&lt;validator&nbsp;type=&quot;&quot;&gt;</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&nbsp;&nbsp; &nbsp;&lt;param name=&quot;filelName&quot;&gt;字段的名字&lt;/param&gt;</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&nbsp;&nbsp; &nbsp;&lt;param name=&quot;参数名&quot;&gt;参数值&lt;/param&gt;</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&nbsp; &nbsp;…</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&nbsp;&nbsp; &nbsp; &lt;message key=&quot;国际化消息&quot;&gt;..&lt;/message&gt;</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&nbsp;&lt;/validator-type&gt;</span><br></div>

<div><br>    &nbsp;<br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">短路校验:是指对于一个字段如果有多个校验条件,第一个校验规则不满足的时候会输出消息,阻止后面的校验输出消息.</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">设置格式是:在&lt;filed-name short-circuit=&quot;true&quot; &gt; 和&lt;validator short-circuit=&quot;true&quot; &gt;</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">校验文件的搜索规则:</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&lt;SuperActonName&gt;-validation.xml</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&lt;SuperActionName&gt;-&lt;MethodName&gt;-validation.xml</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&lt;ActionName&gt;-validation.xml</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&lt;ActionName&gt;-&lt;methodName&gt;-validation.xml</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">规则是:从上往下搜索,但是下面的会覆盖上面的,所有的xml文件都加载.</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">除了以上配置xml校验外,还有基于注解的校验,和手动完成输入校验.</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">手动完成的输入校验,需要重写Action中的validate方法,或者重写validateXxx方法.</span><br></div>

<div><br>    &nbsp;<br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">输入校验的步骤:</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">(1)类型转换器对字符串进行解析,将字符串解析成相应的对象形式</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">(2)如果在解析过程中出现异常,conversionError拦截器将错误信息封装到FieldError里,然后执行第3步,;如果没有错误,直接执行第3步.</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">(3)使用struts2配置的校验器进行输入校验</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">(4)通过反射调用validteXxx方法</span><br></div>

<div><br>    <a href="http://www.dreamleilei.com/wordpress/wp-content/uploads/2015/07/2015-07-26-231115-的截屏.png" target="_blank" rel="external"><img src="http://www.dreamleilei.com/wordpress/wp-content/uploads/2015/07/2015-07-26-231115-的截屏-300x82.png" alt="2015-07-26 23:11:15 的截屏"></a><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">(6)如果以上都没有出现fieldError,调用Action里处理用户请求的方法,如果有fieldError,系统将转入input视图资源.</span><br></div>

<div><br>    &nbsp;<br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">利用struts2实现文件的上传</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">在strust包中,org.apache.struts.default.properties中有这样几行:你会发现这样一行</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">struts.multipart.parser=jakarta</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">说明struts2的解析器是用到jakarta</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">然后你需要额外引入common-io-2.2.jar和commons-fieldupload-1.3.1.jar</span><br></div>

<div><br>    &nbsp;<br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">文件上传中用到struts标签库中的一个标签&lt;s:file &gt;</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">然后需要配置相应的action:</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">需要额外配置三个参数:</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">File xxx;</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">String xxxContentType;</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">String xxxFileName;</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">这三个参数由上传的File给指定,xxx代表这File的name,然后在action中配置好存储路径,实现好文件的复制即可.</span><br></div>

<div><br>    &nbsp;<br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">实现文件下载:</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">配置Action:需要一个方法返回类型为InputStream 方法名为getXxxx(),然后实现下载只需要配置相应的action即可.</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&lt;action&gt;的配置:</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&lt;result type=&quot;stream&quot;&gt;</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&nbsp;&nbsp; &nbsp; &lt;param name =&quot;inputName&#39; &gt;xxxx(和上面的返回的InputStream的方法名相对应)&lt;/param&gt;</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&nbsp;&nbsp; &lt;param name=&quot;contentType&quot;&gt;&lt;/param&gt;</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&nbsp;&nbsp;&lt;param name=&quot;contentDisposition&quot; /&gt;下载的文件名&lt;/param&gt;</span><br></div>

<div><br>    <span style="font-size: 20px; line-height: 32px;">&lt;param name=&quot;bufferSize&quot;&gt;下载缓冲区大小&lt;/param&gt;</span><br></div>

<div><br>    &nbsp;<br></div>

<div><br>    &nbsp;<br></div>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/07/24/jsp-e5-a4-8d-e4-b9-a0/" itemprop="url">
                  JSP复习
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-07-24T16:14:22+08:00" content="2015-07-24">
              2015-07-24
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Java复习/" itemprop="url" rel="index">
                    <span itemprop="name">Java复习</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#<br>    <span style="font-family:arial,helvetica,sans-serif;">&nbsp;复习了JSP 的一些基础的东西,总结一下.</span></p>
<pre><code>&amp;nbsp;

&lt;span style=&quot;font-family:arial,helvetica,sans-serif;&quot;&gt;&lt;span style=&quot;font-size:20px;&quot;&gt;首先jsp是一门后台语言,但是在web开发中,如果用jsp+servlet+javaBean开发的话,jsp作为mvc中的view层,主要用来表现的.&lt;/span&gt;&lt;/span&gt;

&lt;span style=&quot;font-family:arial,helvetica,sans-serif;&quot;&gt;&lt;span style=&quot;font-size:20px;&quot;&gt;jsp的工作原理,其实jsp的本质就是servlet,当用户第一次访问一个jsp页面的时候,web容器把jsp页面编译成相应的servlet进行响应.&lt;/span&gt;&lt;/span&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;jsp的四种基本语法:&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(1)jsp注释&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(2)jsp表达式的输出&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(3)jsp声明&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(4)jsp脚本&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(1)jsp注释:&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;注释的格式&amp;lt;%-- --%&amp;gt; html的注释格式&amp;lt;!-- --&amp;gt;&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(2)jsp表达式的输出&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;&amp;lt;%=表达式%&amp;gt;(注意后面没有分号);&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(3)jsp声明&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;&amp;lt;%!&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;%&amp;gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;&amp;nbsp;在此声明,多次请求一个jsp只会初始化一次声明.&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(4)jsp脚本&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;&amp;lt;% 脚本 %&amp;gt;凡是在&amp;lt;% %&amp;gt;中的内容都是jsp脚本的内容,可以在jsp脚本中插入html代码&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;jsp的三个编译指令&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(1)page指令 &amp;lt;%@ page .... %&amp;gt;&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;这是对整个页面的一个描述后面可以加language=&amp;quot;&amp;quot; , charset=&amp;quot;&amp;quot;, contenttype=&amp;quot;&amp;quot;, import=&amp;quot;&amp;quot;, isErrorPage=&amp;quot;&amp;quot;, isElIgnored=&amp;quot;&amp;quot;, extends=&amp;quot;&amp;quot;.&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(2)taglib指令&amp;lt;%@ taglib uri=&amp;quot;&amp;quot; prefix=&amp;quot;&amp;quot;%&amp;gt;(后面提到的两个属性都是必需的)&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(3)include指令&amp;lt;%@ include file=&amp;quot;&amp;quot;(必需的,且只有一个) %&amp;gt;&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;JSP的七个指令动作:&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(1)jsp:forward 转发&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;里面只有一个page属性且是必需的.转发的时候相应的url是不变的,可以通过&amp;lt;jsp:param name=&amp;quot;&amp;quot; value=&amp;quot;&amp;quot; &amp;gt;传入参数,且转发的时候之前的请求属性等等是不会丢失的.&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(2)jsp:include 用于动态引入一个JSP页面&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;也可以通过&amp;lt;jsp:param&amp;gt;设置参数&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;&amp;lt;page=&amp;quot;&amp;quot;该属性是必需的&amp;gt;&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;&amp;lt;autoflash=&amp;quot;&amp;quot;&amp;gt;设置是否自动刷新&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(3)jsp:param 初始化参数&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;一般和jsp:forward和jsp:include混合使用&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(4)jsp:plugin&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(5)jsp:useBean 引入JavaBean实例&lt;/span&gt;&lt;/font&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;&amp;lt;jsp:useBean id=&amp;quot;&amp;quot;(必需的)&amp;nbsp;class=&amp;quot;&amp;#39; beanName=&amp;quot;&amp;quot; scope=&amp;quot;&amp;quot;(可选属性application,page,request,session)&lt;/span&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(6)jsp:setProperty 设置javaBean实例中的属性&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;&amp;lt;jsp:setProerty property = &amp;quot;&amp;quot;(必需的) name=&amp;quot;&amp;quot;(必需的) &amp;nbsp;value=&amp;quot;&amp;quot;&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(7)jsp:getProperty 获取javaBean实例中的属性&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;&amp;lt;jsp:getProperty property =&amp;quot;&amp;quot; name=&amp;quot;&amp;quot;&amp;nbsp;&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;jsp的9个内置对象.&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(1)request&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;对应于Servlet中HttpRequest对象,&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(2)response&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;对应于Servlet中HttpResponse对象&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(3)session&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;对应与Servlet中HttpSession对象&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(4)page&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;对应于pageContext实例.&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(5)config&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;对应于ServletConfig对象&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(6)application&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;ServletContext实例&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;对应于整个web应用&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(7)out&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(8)exception&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(9)pageContext&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;对应于ServletContext对象.&lt;/span&gt;&lt;/font&gt;

&amp;nbsp;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;JSP的生命周期:&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(1)解析阶段:Servlet容器解析jsp代码,如果有错误,就返回错误.&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(2)翻译阶段:将JSP代码翻译成Servlet代码&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(3)编译阶段:Servlet容器编译相应的Servlet源文件,生成Servlet类&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(4)初始化阶段:&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(5)运行阶段&lt;/span&gt;&lt;/font&gt;

&lt;font face=&quot;arial, helvetica, sans-serif&quot;&gt;&lt;span style=&quot;font-size: 20px; line-height: 32px;&quot;&gt;(6)销毁阶段&lt;/span&gt;&lt;/font&gt;
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/07/24/Servlet复习/" itemprop="url">
                  Servlet复习
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-07-24T01:42:27+08:00" content="2015-07-24">
              2015-07-24
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Java复习/" itemprop="url" rel="index">
                    <span itemprop="name">Java复习</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><span style="font-size:20px;">&nbsp;</span></p>
<pre><code>之前学过jsp,servlet和struts2基础,因为学完后不久就在准备最后的Java比赛和期末考试,好久没有写关于这些方面的代码了,于是趁着最近的时间复习一下有关这方面的内容.&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;我学的都是最基础的,最简单的东西.&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;首先谈一下webapp的工作路径吧,首先要有一个根目录,然后根目录下面有一个WEB-INF文件夹和src文件夹,在这个文件夹里面有一个web.xml文件(Servlet3.0以后这个文件可以没有),然后相应的jsp页面应该放在根目录下面,如果放在WEB-INF文件夹下面,是没有办法直接在浏览器里输入URL访问的,但是可以通过相应的映射访问,(有些页面出于安全考虑,可以放在WEB-INF下面,这样一定程度上可以提高安全性),一般WEB-INF文件夹下面有class文件夹和lib文件夹,其中lib文件夹是存放应用中需要用到的第三方jar包,class文件夹存放.class文件.

根目录下的src文件夹是存放各种用到的源文件,比如自己写的Servlet文件或者Filter文件或者JavaBean.&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;接下来谈一下web.xml的配置,有一篇博客写的很棒,在此把它给粘上http://www.cnblogs.com/chinafine/archive/2010/09/02/1815980.html之前一直一位web.xml中的元素是没有顺序的,后来发现自己错的相当严重,导致花了好几个小时找错误,找不到哪里错了.

最基础的是&amp;lt;servlet&amp;gt;元素一定在&amp;lt;servlet-mapping&amp;gt;元素之后,而&amp;lt;context&amp;gt;元素在&amp;lt;servlet&amp;gt;元素之前,&amp;lt;context-param&amp;gt;在&amp;lt;servlet&amp;gt;元素之前,在此列出一下最常用的一些元素的顺序:&amp;lt;display-name&amp;gt; , &amp;lt;description&amp;gt;, &amp;lt;filter&amp;gt;,&amp;lt;filter-mapping&amp;gt;, &amp;lt;listener&amp;gt;,&amp;lt;servlet&amp;gt; ,&amp;lt;servlet-mapping&amp;gt;,除了通过配置web.xml可以实现配置外,还可以通过注解的形式配置.&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;&amp;lt;servlet&amp;gt;配置:需要的子元素&amp;lt;servlet-name&amp;gt; &amp;lt;servlet-classs&amp;gt;(这两个元素是必须的)

&amp;nbsp;&amp;lt;servlet-mapping&amp;gt;配置:需要子元素&amp;lt;servlet-name&amp;gt;(此元素的值必须与&amp;lt;servlet&amp;gt;中的某个值匹配) &amp;lt;url-pattern&amp;gt;(次元素可以有多个值) (这两个元素是必须的)

也可以通过注解的形式来进行配置Servlet(要求Servlet版本至少3.0)格式如下:

@WebServlet(name=&amp;quot;name&amp;quot;, urlPatterns={&amp;quot;pattern1&amp;quot;, &amp;quot;pattern2&amp;#39;}, initParams={@WebInitParam(name=&amp;quot;name&amp;quot;, value=&amp;quot;value&amp;quot;), @WebInitParam(name=&amp;quot;name1&amp;quot;, value=&amp;quot;value1&amp;quot;)})&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;&amp;lt;filter&amp;gt;配置:和servlet的配置基本一致,在此就不再重复.&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;&amp;lt;listener&amp;gt;配置:只需要&amp;lt; listener-class&amp;gt;子元素&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;&amp;lt;context-param&amp;gt;配置:需要的子元素&amp;lt;param-name&amp;gt;和&amp;lt;param-value&amp;gt;(至少这两个元素,且只准出现一次)&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;说完了简单web.xml的配置,说一下简单的Servlet,创建一个Servlet必须要继承HttpServlet这个类,这个类中有好多方法,比如说do+请求方式方法,如doGet, doPost等等,这些方法的参数是HttpServletRequest类型和HttpServletResponse类型,如果是直接请求一个Servlet的话,是service()方法来对它进行响应的.&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;HttpServletRequest接口实现了ServletRequest接口,ServletRequest接口的方法有getContextType(), getContextLength(),getInputStream(), getLocalAddr(), getLocalName(), getLocalPort(),getParameter(String name),

getAttribue(String name), setAttribute(String name, Object obj),removeAttribute(String name),getParameterNames(),getParameterMap()等等,HttpServletRequest接口中的方法:getCookies(), getHeader(String name), getHeaderNames(),getMethod(),getRequestURI(), getQueryString(),等.&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;HttpServletResponse接口实现了ServletResponse接口,ServletResponse接口的常用方法有:setContextType,setContextLength(),getOutputStream(),getWriter(),reset(),getCharacterEncoding(),flushBuffer(),

HttpServletResponse接口中添加的方法有addHeader(String name, String value), setHeader(String name, String value), addCookie(Cookie cookie), setStatus(int sc), sendError(int sc);&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;ServletConfig接口中的方法getInitParameter(String name), getInitParameterNames(),getServleContext(),getServletName(),这个接口实例化后产生的是一个servlet的实例,而getInitParameter(String name)方法获取的参数来自于&amp;lt;servlet&amp;gt;里定义的或者在@WebServlet(initparameters)里面注解的参数.getServeletContext()方法返回一个ServletContext的实例,&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;ServletContext接口 ,每个Web应用有唯一的ServletContext对象,该接口中定义的方法有:setAttitute(String name, Object obj), getAttribuer(String name),getInitParameter(String name_, getInitParameterNames(), getAttributeNames(),getRequestDispatcher(String path), getRealPath(String path), log(String msg)&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;HttpSession接口 :getId(), invalidata(),setAttribute(String name, Object, obj), getAttribute(String name), getAttributeNames(), removeAttribueName(String name), isNew(),SetMaxInactiveInterval(int interval),getServletContext().&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;Cookie接口:&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;列举完了几个常用的Servlet接口,接下来谈一下Web应用,

Web应用的生命周期:

(1)启动阶段

(2)运行阶段

(3)终止阶段&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;Web应用的启动阶段:

(1)将web.xml读入内存中

(2)创建一个ServletContext实例

(3)初始化Filter

(4)初始化必要的Servlet(load-on-startup)&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;Web应用的运行阶段:Servlet都处于待命的状态&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;Web应用的终止阶段:

(1)销毁Servlet实例

(2)销毁Filter

(3)销毁与JavaWeb应用有关的对象,如ServletContext&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;谈一下Servlet的生命周期:

(1)初始化阶段

(2)运行阶段

(3)销毁阶段&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;初始化阶段:

(1)加载.class文件到内存中

(2)Servlet创建ServletConfig对象.

(3)创建Servlet对象

(4)调用Servlet的Init()方法&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;运行阶段:&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;销毁阶段;

调用destory()方法.销毁Servlet对象,然后销毁ServletConfig对象.&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;包含与转发:

ServletContext对象的getRequestDispatcher().forward() 或者.include();

或者调用request对象的相应方法,两者的区别是前者只能使用绝对路径,后者可以使用相对路径.&lt;/span&gt;

&lt;span style=&quot;font-size:20px;&quot;&gt;重定向:

response.sendRedirect(String location)重定向会丢失所有的请求参数.&lt;/span&gt;

&amp;nbsp;

&amp;nbsp;
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://avatars1.githubusercontent.com/u/10141940?s=460&v=4"
               alt="dreamleilei" />
          <p class="site-author-name" itemprop="name">dreamleilei</p>
          <p class="site-description motion-element" itemprop="description">for my dream</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">36</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">20</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">41</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/dreamleilei" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://weibo.com/dreamleilei" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">dreamleilei</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';                
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });
                            
                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').mousedown(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>

  

  

  

</body>
</html>
